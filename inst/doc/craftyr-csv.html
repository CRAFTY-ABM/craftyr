<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Sascha Holzhauer" />

<meta name="date" content="2016-11-10" />

<title>Using CSV data with craftyr</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>



<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20700px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%201%2E35%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%2010px%3B%0A%20%20padding%3A%204px%3B%0A%20%20width%3A%20400px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%200%2E25em%200%2E75em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%20%20%20%20%2F%2A%20Wrap%20long%20lines%20%2A%2F%0A%7D%0Apre%20%7B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0A%20%20font%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%200px%3B%0A%7D%0A%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Using CSV data with craftyr</h1>
<h4 class="author"><em>Sascha Holzhauer</em></h4>
<h4 class="date"><em>2016-11-10</em></h4>


<div id="TOC">
<ul>
<li><a href="#input-read-csv-data">Input (read) CSV Data</a><ul>
<li><a href="#overall-features">(Overall) Features</a></li>
<li><a href="#source-regional-csv-data-celltable---land-use-data-per-cell">Source: Regional CSV data (CellTable) - Land use data per cell</a></li>
<li><a href="#source-regional-csv-data-celltable---aggregated-data">Source: Regional CSV data (CellTable) - Aggregated data</a></li>
<li><a href="#source-cell-table-pre-allocation-competitiveness">Source: Cell Table (Pre-Allocation Competitiveness)</a></li>
<li><a href="#source-aggregated-aft-composition">Source: Aggregated AFT Composition</a></li>
<li><a href="#source-aggregated-demand-and-supply-data-aggregatedemandsupplycsvoutputter">Source: Aggregated Demand and Supply Data (AggregateDemandSupplyCSVOutputter)</a></li>
<li><a href="#source-takeover-from-giving-in-data-takeovercelloutputter">Source: TakeOver from Giving In Data (TakeoverCellOutputter)</a></li>
<li><a href="#source-givingin-statistics-givinginstatisticsoutputter">Source: GivingIn Statistics (GivingInStatisticsOutputter)</a></li>
<li><a href="#source-marginal-utilities">Source: Marginal Utilities</a></li>
</ul></li>
<li><a href="#visualise-csv-data">Visualise CSV Data</a><ul>
<li><a href="#map-data">Map Data</a><ul>
<li><a href="#landuseindex-facets">LandUseIndex: Facets</a></li>
<li><a href="#landuseindex-raw-plot">LandUseIndex: Raw Plot</a></li>
</ul></li>
<li><a href="#aggregate-data">Aggregate Data</a><ul>
<li><a href="#from-cell-level-data">From Cell Level Data</a><ul>
<li><a href="#aft-composition-as-timeline">AFT Composition as Timeline</a></li>
<li><a href="#competitiveness-mean-by-region">Competitiveness (Mean by region)</a></li>
<li><a href="#spatial-autocorrelation">Spatial Autocorrelation</a></li>
<li><a href="#cell-connectedness">Cell Connectedness</a></li>
<li><a href="#cell-volatility">Cell Volatility</a></li>
<li><a href="#further-cell-data-as-timeline">Further Cell Data as Timeline</a></li>
</ul></li>
<li><a href="#from-aggregated-region-level-data">From Aggregated (Region Level) Data</a><ul>
<li><a href="#aft-composition-as-timeline-1">AFT Composition as Timeline</a></li>
<li><a href="#aggregated-demand-and-supply-data">Aggregated Demand and Supply Data</a></li>
<li><a href="#take-overs-giving-in">Take Overs (Giving in)</a></li>
<li><a href="#take-overs-all">Take Overs (All)</a></li>
<li><a href="#givinginstatistics-frequencies-per-aft---regions-aggregated">GivingInStatistics (Frequencies per AFT - Regions aggregated)</a></li>
<li><a href="#pre-allocation-competitiveness">Pre-Allocation Competitiveness</a></li>
<li><a href="#cell-volatility-1">Cell Volatility</a></li>
<li><a href="#marginal-utilities">Marginal Utilities</a></li>
<li><a href="#demand-normalised-per-cell-marginal-utilities">Demand-normalised per-cell marginal Utilities</a></li>
<li><a href="#total-productivity">Total Productivity</a></li>
<li><a href="#actions">Actions</a></li>
</ul></li>
<li><a href="#from-single-files">From Single Files</a><ul>
<li><a href="#aft-composition">AFT Composition</a></li>
<li><a href="#aft-composition-1">AFT Composition</a></li>
<li><a href="#demand-and-supply">Demand and Supply</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#output-write-csv-data">Output (write) CSV Data</a><ul>
<li><a href="#land-use-index-per-tick">Land Use Index (per tick)</a></li>
<li><a href="#generate-landuseindex-key">Generate LandUseIndex key</a></li>
<li><a href="#aggregate-demand-and-supply">Aggregate demand and supply</a></li>
<li><a href="#supplydemand-gap-regarding-agent-parameters-gu-probability">Supply/Demand gap regarding agent parameters (GU probability)</a></li>
</ul></li>
<li><a href="#conversions">Conversions</a><ul>
<li><a href="#stored-csvdata.frame-rdata-to-raster-file-ascii">Stored CSV/data.frame (rData) to raster file (ASCII)</a></li>
</ul></li>
</ul>
</div>

<div id="input-read-csv-data" class="section level1">
<h1>Input (read) CSV Data</h1>
<div id="overall-features" class="section level2">
<h2>(Overall) Features</h2>
<ul>
<li>Limit considered ticks by starttick, endtick, and interval</li>
<li>Read CSV files of multiple regions at once</li>
</ul>
</div>
<div id="source-regional-csv-data-celltable---land-use-data-per-cell" class="section level2">
<h2>Source: Regional CSV data (CellTable) - Land use data per cell</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()

futile.logger::<span class="kw">flog.threshold</span>(futile.logger::DEBUG, <span class="dt">name=</span><span class="st">'craftyr.input.csv'</span>)

cdata &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;Cell&quot;</span>, <span class="dt">columns =</span> <span class="st">&quot;LandUseIndex&quot;</span>,
        <span class="dt">pertick =</span> <span class="ot">TRUE</span>, <span class="dt">starttick =</span> <span class="dv">2000</span>, <span class="dt">endtick =</span> <span class="dv">2020</span>, <span class="dt">tickinterval =</span> <span class="dv">10</span>,
        <span class="dt">attachfileinfo =</span> <span class="ot">TRUE</span>, <span class="dt">bindrows =</span> <span class="ot">TRUE</span>)
csv_LandUseIndex_rbinded &lt;-<span class="st"> </span>cdata
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)
cdata &lt;-<span class="st"> </span><span class="kw">split</span>(cdata, <span class="kw">list</span>(cdata$Tick, cdata$Runid))
csv_LandUseIndex_split &lt;-<span class="st"> </span>cdata
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_LandUseIndex_split&quot;</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_store_csvcelldata</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>, <span class="dt">tickinterval =</span> <span class="dv">10</span>)</code></pre>
<p>For large data sets it is a good idea to clean the data somewhat before storing:</p>
<pre class="sourceCode r"><code class="sourceCode r">cdata &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;Cell&quot;</span>, <span class="dt">colums =</span> <span class="st">&quot;LandUseIndex&quot;</span>,
        <span class="dt">pertick =</span> <span class="ot">TRUE</span>, <span class="dt">starttick =</span> <span class="dv">2010</span>, <span class="dt">endtick =</span> <span class="dv">2040</span>, <span class="dt">tickinterval =</span> <span class="dv">30</span>, <span class="dt">attachfileinfo =</span> <span class="ot">TRUE</span>)

cdata$Region &lt;-<span class="st"> </span><span class="ot">NULL</span>
cdata$Scenario &lt;-<span class="st"> </span><span class="ot">NULL</span>

data &lt;-<span class="st"> </span><span class="kw">split</span>(cdata, <span class="kw">list</span>(cdata$Tick,cdata$Runid))

cdata &lt;-<span class="st"> </span><span class="kw">lapply</span>(cdata, function(x) {x$Runid &lt;-<span class="st"> </span><span class="ot">NULL</span>; x})
cdata &lt;-<span class="st"> </span><span class="kw">lapply</span>(cdata, function(x) {x$Tick &lt;-<span class="st"> </span><span class="ot">NULL</span>; x})

csv_LandUseIndex_split &lt;-<span class="st"> </span>cadata
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_LandUseIndex_split&quot;</span>)
<span class="kw">rm</span>(<span class="kw">list</span>(csv_LandUseIndex_split, cdata)</code></pre>
</div>
<div id="source-regional-csv-data-celltable---aggregated-data" class="section level2">
<h2>Source: Regional CSV data (CellTable) - Aggregated data</h2>
<p>Note that the fields in cell table depend on the output configuration as well as service names. Thus, the aggregation function needs to be adapted.</p>
<pre class="sourceCode r"><code class="sourceCode r">aggregationFunction &lt;-<span class="st"> </span>function(simp, data) {
    <span class="kw">library</span>(plyr) <span class="co"># because '.' function cannot be addressed</span>
    plyr::<span class="kw">ddply</span>(data, .(Runid, Region, Tick, LandUseIndex), <span class="dt">.fun=</span>function(df) {
                df$Counter &lt;-<span class="st"> </span><span class="dv">1</span>
                <span class="kw">with</span>(df, <span class="kw">data.frame</span>(
                                <span class="dt">Runid               =</span> <span class="kw">unique</span>(Runid),
                                <span class="dt">Region              =</span> <span class="kw">unique</span>(Region),
                                <span class="dt">Tick                =</span> <span class="kw">mean</span>(Tick),
                                <span class="dt">LandUseIndex        =</span> <span class="kw">mean</span>(LandUseIndex),
                                <span class="dt">AFT                 =</span> <span class="kw">sum</span>(Counter),
                                <span class="dt">Service.Service1    =</span> <span class="kw">sum</span>(Service.Service1), 
                                <span class="dt">Service.Service2    =</span> <span class="kw">sum</span>(Service.Service2),
                                <span class="dt">Service.Service3    =</span> <span class="kw">sum</span>(Service.Service3),
                                <span class="dt">Capital.Cap1        =</span> <span class="kw">sum</span>(Capital.Cap1)) )
            })
}

csv_cell_aggregated &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;Cell&quot;</span>, <span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">&quot;Service.Service1&quot;</span>, <span class="st">&quot;Service.Service2&quot;</span>,
                <span class="st">&quot;Service.Service3&quot;</span>, <span class="st">&quot;Capital.Cap1&quot;</span>, <span class="st">&quot;LandUseIndex&quot;</span>, <span class="st">&quot;AFT&quot;</span>), <span class="dt">pertick =</span> <span class="ot">TRUE</span>,
        <span class="dt">starttick =</span> <span class="dv">2000</span>, <span class="dt">endtick =</span> <span class="dv">2020</span>, <span class="dt">tickinterval =</span> <span class="dv">10</span>,
        <span class="dt">attachfileinfo =</span> <span class="ot">TRUE</span>, <span class="dt">bindrows =</span> <span class="ot">TRUE</span>,
        <span class="dt">aggregationFunction =</span> aggregationFunction,
        <span class="dt">skipXY =</span> <span class="ot">TRUE</span>)
<span class="kw">rownames</span>(csv_cell_aggregated) &lt;-<span class="st"> </span><span class="ot">NULL</span>
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_cell_aggregated&quot;</span>)</code></pre>
</div>
<div id="source-cell-table-pre-allocation-competitiveness" class="section level2">
<h2>Source: Cell Table (Pre-Allocation Competitiveness)</h2>
<p>Read CSV data of pre-allocation competitiveness and transfer to data.frame of frequencies. Requires the output of giving-up threshold, pre-allocation LandUseIndex and pre-allocation competitiveness with the Cell Table outputter (addPreAllocCompetitiveness=“true” addPreAllocGuThreshold=“true” addPreAllocLandUse=“true”).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
simp$sim$filepartorder  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;regions&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;datatype&quot;</span>)
csv_preAllocTable &lt;-<span class="st"> </span><span class="kw">input_csv_prealloccomp</span>(simp)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_preAllocTable&quot;</span>)</code></pre>
</div>
<div id="source-aggregated-aft-composition" class="section level2">
<h2>Source: Aggregated AFT Composition</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
dataAggregateAFTComposition &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;AggregateAFTComposition&quot;</span>,
        <span class="dt">pertick =</span> <span class="ot">FALSE</span>,
        <span class="dt">bindrows =</span> <span class="ot">TRUE</span>,
        <span class="dt">skipXY =</span> <span class="ot">TRUE</span>)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;dataAggregateAFTComposition&quot;</span>)</code></pre>
</div>
<div id="source-aggregated-demand-and-supply-data-aggregatedemandsupplycsvoutputter" class="section level2">
<h2>Source: Aggregated Demand and Supply Data (AggregateDemandSupplyCSVOutputter)</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
csv_aggregateServiceDemand &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;AggregateServiceDemand&quot;</span>,
        <span class="dt">pertick =</span> <span class="ot">FALSE</span>, <span class="dt">bindrows =</span> <span class="ot">TRUE</span>)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_aggregateServiceDemand&quot;</span>)</code></pre>
</div>
<div id="source-takeover-from-giving-in-data-takeovercelloutputter" class="section level2">
<h2>Source: TakeOver from Giving In Data (TakeoverCellOutputter)</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
csv_aggregateTakeOvers &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;TakeOvers&quot;</span>, <span class="dt">pertick =</span> <span class="ot">FALSE</span>,
        <span class="dt">bindrows =</span> <span class="ot">TRUE</span>,
        <span class="dt">skipXY =</span> <span class="ot">TRUE</span>)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_aggregateTakeOvers&quot;</span>)</code></pre>
</div>
<div id="source-givingin-statistics-givinginstatisticsoutputter" class="section level2">
<h2>Source: GivingIn Statistics (GivingInStatisticsOutputter)</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
csv_aggregateGiStatistics &lt;-<span class="st"> </span><span class="kw">input_csv_data</span>(simp, <span class="dt">dataname =</span> <span class="ot">NULL</span>, <span class="dt">datatype =</span> <span class="st">&quot;GivingInStatistics&quot;</span>,
        <span class="dt">pertick =</span> <span class="ot">FALSE</span>,
        <span class="dt">bindrows =</span> <span class="ot">TRUE</span>,
        <span class="dt">skipXY =</span> <span class="ot">TRUE</span>)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_aggregateGiStatistics&quot;</span>)</code></pre>
</div>
<div id="source-marginal-utilities" class="section level2">
<h2>Source: Marginal Utilities</h2>
<p>Note: currently, there is no outputter, but marginal utilities can be extracted from log data using a python script (see Py4ABM, <a href="https://bitbucket.org/S-Holzhauer/py4abm" class="uri">https://bitbucket.org/S-Holzhauer/py4abm</a>). The resulting CSV file should be placed in the project’s RData folder.</p>
<p>TODO</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
csv_MarginalUtilitites_melt &lt;-<span class="st"> </span><span class="kw">input_marginalutilities</span>(simp)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_MarginalUtilitites_melt&quot;</span>)</code></pre>
</div>
</div>
<div id="visualise-csv-data" class="section level1">
<h1>Visualise CSV Data</h1>
<div id="map-data" class="section level2">
<h2>Map Data</h2>
<div id="landuseindex-facets" class="section level3">
<h3>LandUseIndex: Facets</h3>
<pre class="sourceCode r"><code class="sourceCode r">simp &lt;-<span class="st"> </span><span class="kw">param_getDefaultSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_LandUseIndex_split&quot;</span>)
cdata &lt;-<span class="st"> </span>csv_LandUseIndex_split
cdata$<span class="st">&quot;2010.2&quot;</span>$ID &lt;&lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="st">&quot;Homo_2010&quot;</span>)
cdata$<span class="st">&quot;2040.2&quot;</span>$ID &lt;&lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="st">&quot;Homo_2040&quot;</span>)

diffcells &lt;&lt;-<span class="st"> </span>cdata$<span class="st">&quot;2010.2&quot;</span>
diffcells$LandUseIndex &lt;&lt;-<span class="st"> </span><span class="ot">NA</span>
diffhomo$LandUseIndex[cdata$<span class="st">&quot;2040.2&quot;</span>$LandUseIndex -<span class="st"> </span>cdata$<span class="st">&quot;2010.2&quot;</span>$LandUseIndex !=<span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="dv">3</span>
diffhomo$ID &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="st">&quot;Diff_Homo_2040-2010&quot;</span>)

toplot &lt;-<span class="st"> </span><span class="kw">list</span>(cdata$<span class="st">&quot;2010.2&quot;</span>, cdata$<span class="st">&quot;2040.2&quot;</span>, diffhomo)
<span class="kw">rm</span>(diffhomo)
<span class="kw">rm</span>(cdata)
<span class="kw">visualise_cells_printPlots</span>(simp, toplot, <span class="dt">idcolumn =</span> <span class="st">&quot;ID&quot;</span>,
        <span class="dt">title =</span> <span class="st">&quot;EU-Homo&quot;</span>, <span class="dt">legendtitle =</span> <span class="st">&quot;AFTs&quot;</span>,
        <span class="dt">factorial=</span> <span class="ot">TRUE</span>, <span class="dt">omitaxisticks =</span> <span class="ot">TRUE</span>, <span class="dt">ncol =</span> <span class="dv">3</span>,
        <span class="dt">legenditemnames =</span> simp$mdata$aftNames, <span class="dt">coloursetname=</span><span class="st">&quot;AFT&quot;</span>)</code></pre>
</div>
<div id="landuseindex-raw-plot" class="section level3">
<h3>LandUseIndex: Raw Plot</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_LandUseIndex_split&quot;</span>)
<span class="kw">visualise_cells_printRawPlots</span>(simp, csv_LandUseIndex_split,
        <span class="dt">factorial=</span> <span class="ot">TRUE</span>, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">id=</span><span class="st">&quot;None&quot;</span>)       </code></pre>
<pre><code>## Warning in grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database

## Warning in grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database

## Warning in grid.Call(L_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
## font family not found in Windows font database</code></pre>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAABlBMVEUbnnfZXwIF3WTLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADCklEQVR4nO3QwW0dMAwFQaf/pnPWxQsw/AnhzBZA6c3Xr8/0daz5kEWU5+6x5kMWUZ67x5oPWUR57h5rPmQR5bl7rPmQRZTn7rHmQxZRnrvHmg9ZRHnuHms+ZBHluXus+ZBFlOfuseZDFlGeu8eaD1lEee4eaz5kEeW5e6z5kEWU5+6x5kMWUZ67x5oPWUR57h5rPmQR5bl7rPmQRZTn7rHmQxZRnrvHmg9ZRHnuHms+ZBHluXus+ZBFlOfuseZDFlGeu8eaD1lEee4eaz5kEeW5e6z5kEWU5+6x5kMWUZ67x5oPWUR57h5rPmQR5bl7rPmQn2MwD1AEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFA0B/rXP78QoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkDRt0D/id63KwEBygBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhR9CGje35/5B3/9zNl4FFA8CigeBRSPAopHAcWjgOJRQPEooHgUUDwKKB4FFI8CikcBxaOA4lFA8SigeBRQPAooHgUUjwKKRwHFo4DiUUDxKKB4FFA8CigeBRSPAvo5AYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIU/QZOU5TAukutlQAAAABJRU5ErkJggg==" /><!-- --></p>
</div>
</div>
<div id="aggregate-data" class="section level2">
<h2>Aggregate Data</h2>
<div id="from-cell-level-data" class="section level3">
<h3>From Cell Level Data</h3>
<div id="aft-composition-as-timeline" class="section level4">
<h4>AFT Composition as Timeline</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)

 <span class="co"># aggregate regions:</span>
csv_LandUseIndex_rbinded$AftNumbers &lt;-<span class="st"> </span>csv_LandUseIndex_rbinded$LandUseIndex
aftData &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(csv_LandUseIndex_rbinded, <span class="dt">select=</span><span class="kw">c</span>(<span class="st">&quot;AftNumbers&quot;</span>)),
        <span class="dt">by =</span> <span class="kw">list</span>(<span class="dt">ID =</span> csv_LandUseIndex_rbinded[,<span class="st">&quot;Runid&quot;</span>],
                <span class="dt">Tick=</span>csv_LandUseIndex_rbinded[, <span class="st">&quot;Tick&quot;</span>],  <span class="dt">AFT=</span>csv_LandUseIndex_rbinded[,<span class="st">&quot;LandUseIndex&quot;</span>]),
        <span class="dt">FUN=</span>sum)
aftData$AFT &lt;-<span class="st"> </span><span class="kw">as.factor</span>(aftData$AFT)
aftData$Proportion &lt;-<span class="st"> </span><span class="kw">ave</span>(aftData$AftNumbers, aftData$ID, aftData$Tick, <span class="dt">FUN =</span>  function(.x) .x/<span class="kw">sum</span>(.x))
aftData$Number &lt;-<span class="st"> </span><span class="ot">NULL</span>

<span class="kw">visualise_lines</span>(<span class="dt">simp =</span> simp, <span class="dt">data =</span> aftData, <span class="dt">y_column=</span><span class="st">&quot;Proportion&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Total AFT composition&quot;</span>,
        <span class="dt">colour_column =</span> <span class="st">&quot;AFT&quot;</span>,
        <span class="dt">colour_legenditemnames =</span> simp$mdata$aftNames,
        <span class="dt">linetype_column =</span> <span class="st">&quot;ID&quot;</span>,
        <span class="dt">linetype_legendtitle =</span> simp$sim$rundesclabel,
        <span class="dt">linetype_legenditemnames =</span> simp$sim$rundesc,
        <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;TotalAftComposition&quot;</span>, 
                shbasic::<span class="kw">shbasic_condenseRunids</span>(<span class="kw">data.frame</span>(aftData)[, <span class="st">&quot;ID&quot;</span>]), <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>),
        <span class="dt">alpha=</span><span class="fl">0.7</span>)</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r">simp1 &lt;-<span class="st"> </span>simp
simp1$sim$shortid &lt;-<span class="st"> &quot;G9/C4&quot;</span>
simp2 &lt;-<span class="st"> </span>simp
simp2$sim$shortid &lt;-<span class="st"> &quot;G10/C5&quot;</span>
<span class="kw">hl_comp_cell_aftcomposition</span>(simp, <span class="dt">simps =</span> <span class="kw">list</span>(simp1, simp2), <span class="dt">dataname =</span> <span class="st">&quot;csv_cell_aggregated&quot;</span>)</code></pre>
</div>
<div id="competitiveness-mean-by-region" class="section level4">
<h4>Competitiveness (Mean by region)</h4>
<p>% TODO</p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_competitivenessPerRegion</span>(simp1, <span class="dt">dataname =</span> <span class="st">&quot;dataAgg&quot;</span>)</code></pre>
</div>
<div id="spatial-autocorrelation" class="section level4">
<h4>Spatial Autocorrelation</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="dt">objectName =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)
data &lt;-<span class="st"> </span><span class="kw">get</span>(<span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)

scoresdata &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, <span class="kw">lapply</span>(<span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">2010</span>, <span class="dt">to=</span><span class="dv">2040</span>, <span class="dt">by=</span><span class="dv">10</span>), function(tick, datac, regions, type) {
                    <span class="kw">do.call</span>(rbind,<span class="kw">lapply</span>(regions, function(tick, region, data, type) {
            tickdata &lt;-<span class="st"> </span>data[data$Tick ==<span class="st"> </span>tick &amp;<span class="st"> </span>data$Region %in%<span class="st"> </span>region, 
                    <span class="kw">c</span>(simp$csv$cname_x, simp$csv$cname_y, <span class="st">&quot;LandUseIndex&quot;</span>)]
            raster &lt;-<span class="st"> </span>craftyr::<span class="kw">convert_2raster</span>(simp, tickdata, <span class="dt">targetCRS =</span> <span class="st">&quot;+init=EPSG:32632&quot;</span>, <span class="dt">layers=</span><span class="kw">c</span>(<span class="dv">1</span>))
            <span class="kw">data.frame</span>(<span class="dt">Value =</span> <span class="kw">analyse_statistics_sa_local</span>(raster[[<span class="dv">1</span>]], <span class="dt">type =</span> type),
                    <span class="dt">Tick =</span> tick, <span class="dt">type =</span> type
                    <span class="dt">Region =</span> region)}, <span class="dt">tick =</span> tick, <span class="dt">data =</span> data, <span class="dt">type =</span> type))
        }, <span class="dt">data =</span> data, <span class="dt">type =</span> <span class="st">&quot;Moran&quot;</span>, <span class="dt">regions =</span> simp$sim$regions))

<span class="kw">visualise_lines</span>(<span class="dt">simp =</span> simp, <span class="dt">data =</span> scoresdata, <span class="dt">y_column =</span> <span class="st">&quot;Value&quot;</span>, <span class="dt">title =</span> <span class="kw">paste</span>(<span class="st">&quot;Spatial Autocorrelation (Moran)&quot;</span>, simp$sim$rundesc[simp$sim$runid]),
        <span class="dt">linetype_column =</span> <span class="st">&quot;Region&quot;</span>,
        <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;Spatial Autocorrelation (Moran)&quot;</span>, <span class="st">&quot;_&quot;</span>, simp$sim$rundesc[simp$sim$runid], <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_aggregate_sa</span>(simp, <span class="dt">celldataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>, 
    <span class="dt">starttick =</span> simp$sim$starttick, <span class="dt">tickinterval=</span><span class="dv">10</span>, <span class="dt">endtick =</span> simp$sim$endtick,
    <span class="dt">linetypecol =</span> <span class="st">&quot;Region&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;Moran&quot;</span>, <span class="dt">regions =</span> simp$sim$regions,
    <span class="dt">titleprefix =</span> <span class="kw">paste</span>(<span class="st">&quot;SpatialAutocorrelation (&quot;</span>, type, <span class="st">&quot;)&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>), 
    <span class="dt">filenameprefix =</span> <span class="kw">paste</span>(<span class="st">&quot;SpatialAutocorrelation&quot;</span>, type, <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>))</code></pre>
</div>
<div id="cell-connectedness" class="section level4">
<h4>Cell Connectedness</h4>
<p>Visualise stored metric LandUseConnectivity as timelines</p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_connectedness</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_aggregated_connectivity&quot;</span>, 
        <span class="dt">datatype =</span> <span class="st">&quot;LandUseConnectivity&quot;</span>, <span class="dt">aftcolumns =</span> simp$mdata$aftNames[-<span class="dv">1</span>],
        <span class="dt">percent =</span> <span class="ot">NULL</span>)</code></pre>
</div>
<div id="cell-volatility" class="section level4">
<h4>Cell Volatility</h4>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_volatility</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_aggregated_cellvolatility&quot;</span>, 
        <span class="dt">datatype =</span> <span class="st">&quot;AggregateCellVolatility&quot;</span>, <span class="dt">datacolumns =</span> <span class="kw">c</span>(<span class="st">&quot;CellVolatility&quot;</span>, <span class="st">&quot;NumVolatileCells&quot;</span>),
        <span class="dt">percent =</span> <span class="ot">NULL</span>)</code></pre>
</div>
<div id="further-cell-data-as-timeline" class="section level4">
<h4>Further Cell Data as Timeline</h4>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_lines_from_csv</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;dataobjectname&quot;</span>, 
        <span class="dt">datatype =</span> <span class="st">&quot;Datatype&quot;</span>, <span class="dt">datacolumns =</span> <span class="kw">c</span>(<span class="st">&quot;ColumnA&quot;</span>,<span class="st">&quot;ColumnB&quot;</span>), <span class="dt">linetypecol =</span> <span class="st">&quot;Region&quot;</span>,
        <span class="dt">colourcol =</span> <span class="st">&quot;Type&quot;</span>, <span class="dt">titleprefix =</span> <span class="st">&quot;Title&quot;</span>, <span class="dt">filenameprefix =</span> <span class="st">&quot;FilenamePrefix&quot;</span>, 
        <span class="dt">percent =</span> <span class="ot">NULL</span>)</code></pre>
</div>
</div>
<div id="from-aggregated-region-level-data" class="section level3">
<h3>From Aggregated (Region Level) Data</h3>
<div id="aft-composition-as-timeline-1" class="section level4">
<h4>AFT Composition as Timeline</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getDefaultSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;dataAggregateAFTComposition&quot;</span>)
dataComp &lt;-<span class="st"> </span>dataAggregateAFTComposition
dataComp[,<span class="kw">grep</span>(<span class="st">&quot;AFT.&quot;</span>, <span class="kw">colnames</span>(dataComp))] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">do.call</span>(cbind, 
    <span class="kw">lapply</span>(dataComp[,<span class="kw">grep</span>(<span class="st">&quot;AFT.&quot;</span>, <span class="kw">colnames</span>(dataComp))], as.character)))
dataComp &lt;-<span class="st"> </span>dataComp[<span class="kw">complete.cases</span>(dataComp),]
<span class="kw">colnames</span>(dataComp) &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;AFT.&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="kw">colnames</span>(dataComp))
    
data &lt;-reshape2::<span class="kw">melt</span>(dataAggregateAFTComposition, <span class="dt">variable.name=</span><span class="st">&quot;Agent&quot;</span>, <span class="dt">id.vars=</span> <span class="kw">c</span>(<span class="st">&quot;Region&quot;</span>, <span class="st">&quot;Tick&quot;</span>, <span class="st">&quot;Runid&quot;</span>, <span class="st">&quot;Scenario&quot;</span>), <span class="dt">direction=</span><span class="st">&quot;long&quot;</span>)
d &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(data, <span class="dt">select=</span><span class="kw">c</span>(<span class="st">&quot;value&quot;</span>)), <span class="dt">by =</span> <span class="kw">list</span>(<span class="dt">Agent =</span> data$Agent, <span class="dt">Tick=</span> data$Tick, <span class="dt">Runid=</span>data$Runid, <span class="dt">Scenario=</span>data$Scenario), <span class="st">&quot;mean&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)

 ## substitute AFT names by AFT ID
aftNumbers &lt;-<span class="st"> </span><span class="kw">names</span>(simp$mdata$aftNames)
<span class="kw">names</span>(aftNumbers) &lt;-<span class="st"> </span>simp$mdata$aftNames
d$AFT &lt;-<span class="st"> </span>aftNumbers[<span class="kw">as.character</span>(d$AFT)]

<span class="kw">visualise_lines</span>(<span class="dt">simp =</span> simp, <span class="dt">data =</span> d, <span class="dt">y_column =</span> <span class="st">&quot;value&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;AftCompositionInvalid&quot;</span>,
        <span class="dt">colour_column =</span> <span class="st">&quot;AFT&quot;</span>, <span class="dt">colour_legenditemnames =</span> simp$mdata$aftNames,
        <span class="dt">filename =</span> <span class="st">&quot;AftCompositionInvalid&quot;</span>,
        <span class="dt">alpha=</span><span class="fl">0.7</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_aggregate_aftcompositions</span>(simp)</code></pre>
</div>
<div id="aggregated-demand-and-supply-data" class="section level4">
<h4>Aggregated Demand and Supply Data</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_aggregateServiceDemand&quot;</span>)

data &lt;-<span class="st"> </span><span class="kw">convert_aggregate_meltsupplydemand</span>(simp, csv_aggregateServiceDemand)

 <span class="co"># Aggregate regions:</span>
data &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(data, <span class="dt">select=</span><span class="kw">c</span>(<span class="st">&quot;Value&quot;</span>)),
        <span class="dt">by =</span> <span class="kw">list</span>(<span class="dt">ID =</span> data[,<span class="st">&quot;Runid&quot;</span>],
                <span class="dt">Tick=</span>data[, <span class="st">&quot;Tick&quot;</span>],  <span class="dt">Scenario =</span> data[,<span class="st">&quot;Scenario&quot;</span>],
                <span class="dt">Service=</span>data[,<span class="st">&quot;Service&quot;</span>], <span class="dt">Type=</span>data[,<span class="st">&quot;Type&quot;</span>]),
        <span class="dt">FUN=</span>sum)

<span class="kw">visualise_lines</span>(<span class="dt">simp =</span> simp, <span class="dt">data =</span> data, <span class="dt">y_column =</span> <span class="st">&quot;Value&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Aggregated Service Supply &amp; Demand&quot;</span>,
        <span class="dt">colour_column =</span> <span class="st">&quot;Service&quot;</span>,
        <span class="dt">linetype_column =</span> <span class="st">&quot;Type&quot;</span>,
        <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;AggregateServiceDemand&quot;</span>, 
                shbasic::<span class="kw">shbasic_condenseRunids</span>(<span class="kw">data.frame</span>(data)[, <span class="st">&quot;ID&quot;</span>]), <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>),
        <span class="dt">alpha=</span><span class="fl">0.7</span>)</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_aggregate_demandsupply</span>(simp)</code></pre>
</div>
<div id="take-overs-giving-in" class="section level4">
<h4>Take Overs (Giving in)</h4>
<p>Visualize take overs due to giving in as arrows between columns of AFTs. Use <a href="https://www.wiki.ed.ac.uk/display/CRAFTY/Output#Output-TakeoverCellOutputter">CRAFTY outputter TakeoverCellOutputter</a> to output the data from CRAFTY. To visualise all take overs (giving in and giving up), see below (using cell data).</p>
<pre class="sourceCode r"><code class="sourceCode r"> <span class="co"># TODO correct output_visualise_takeovers to work with gradient2sided (bezierArrowGradient2sided.R:304)</span>

<span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_aggregateTakeOvers&quot;</span>)
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_cell_aggregated&quot;</span>)
    
startPopulation &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">names</span>(simp$mdata$aftNames), <span class="dv">0</span>)
<span class="kw">names</span>(startPopulation) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Agent&quot;</span>, <span class="st">&quot;AFT&quot;</span>)
sp &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(csv_cell_aggregated, <span class="dt">select=</span><span class="kw">c</span>(<span class="st">&quot;AFT&quot;</span>),
        <span class="dt">subset =</span> csv_cell_aggregated$Tick==<span class="dv">2000</span> &amp;&amp;<span class="st"> </span>csv_cell_aggregated$Runid ==<span class="st"> &quot;0-0&quot;</span>),
        <span class="dt">by =</span> <span class="kw">list</span>(<span class="dt">Agent =</span> csv_cell_aggregated[csv_cell_aggregated$Tick ==<span class="st"> </span><span class="dv">2000</span> &amp;&amp;<span class="st"> </span>
<span class="st">                    </span>csv_cell_aggregated$Runid ==<span class="st"> &quot;0-0&quot;</span>,<span class="st">&quot;LandUseIndex&quot;</span>]), <span class="dt">FUN=</span>sum)
startPopulation[startPopulation$Agent %in%<span class="st"> </span>sp$Agent,<span class="st">&quot;AFT&quot;</span>] &lt;-<span class="st"> </span>sp$AFT 
startPopulation$Agent &lt;-<span class="st"> </span>simp$mdata$aftNames[<span class="kw">as.character</span>(startPopulation$Agent)]
    
simp$mdata$aftNames &lt;-<span class="st"> </span>simp$mdata$aftNames[-<span class="dv">1</span>]
dat &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(csv_aggregateTakeOvers, <span class="dt">select=</span>simp$mdata$aftNames), <span class="dt">by =</span> <span class="kw">list</span>(
        <span class="dt">Tick=</span>csv_aggregateTakeOvers[, <span class="st">&quot;Tick&quot;</span>],
        <span class="dt">Runid=</span>csv_aggregateTakeOvers[, <span class="st">&quot;Runid&quot;</span>],
        <span class="dt">AFT=</span>csv_aggregateTakeOvers[,<span class="st">&quot;AFT&quot;</span>]),
        <span class="dt">FUN=</span>sum)

startPopulation &lt;-<span class="st"> </span>startPopulation[<span class="kw">match</span>(simp$mdata$aftNames, startPopulation$Agent),]
<span class="kw">colnames</span>(startPopulation)[<span class="kw">colnames</span>(startPopulation) ==<span class="st"> &quot;AFT&quot;</span>] &lt;-<span class="st"> &quot;Number&quot;</span>
    
<span class="kw">output_visualise_takeovers</span>(simp,
        <span class="dt">data =</span> dat, 
        <span class="dt">startpopulation =</span> startPopulation,
        <span class="dt">starttick =</span> <span class="dv">2000</span>,
        <span class="dt">endtick =</span> <span class="dv">2020</span>,
        <span class="dt">tickinterval=</span> <span class="dv">1</span>,
        <span class="dt">type_of_arrow =</span> <span class="st">&quot;simple&quot;</span>, <span class="co">#&quot;gradient2sided&quot;,</span>
        <span class="dt">transitionthreshold =</span> <span class="dv">1</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_takeovers</span>(simp)</code></pre>
</div>
<div id="take-overs-all" class="section level4">
<h4>Take Overs (All)</h4>
<p>Requirements: * Land use indices stored in an object whose name is given by <code>landusedataname</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
 
csv_dataTakeOversAll &lt;-<span class="st"> </span><span class="kw">convert_aggregate_takeovers</span>(simp,
    <span class="dt">landusedataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;csv_dataTakeOversAll&quot;</span>)

<span class="kw">hl_takeovers</span>(simp, <span class="dt">runid =</span> simp$sim$runids[<span class="dv">1</span>], 
        <span class="dt">dataname            =</span> <span class="st">&quot;csv_cell_aggregated&quot;</span>,
        <span class="dt">starttick           =</span> <span class="dv">2000</span>, 
        <span class="dt">tickinterval        =</span> <span class="dv">5</span>, 
        <span class="dt">endtick             =</span> <span class="dv">2020</span>,
        <span class="dt">datanametakeovers   =</span> <span class="st">&quot;csv_dataTakeOversAll&quot;</span>)</code></pre>
<p>For larger sets of AFT it is advisable to group these into fewer sets. This can be achieved by passing the <code>aftaggregation</code> parameter:</p>
<pre class="sourceCode r"><code class="sourceCode r">aftaggregation &lt;-<span class="st"> </span>simp$mdata$aftNames
<span class="kw">data.entry</span>(simp$mdata$aftNames, aftaggregation, <span class="dt">Modes=</span><span class="kw">list</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>))
<span class="kw">hl_takeovers</span>(simp, <span class="dt">runid =</span> simp$sim$runids[<span class="dv">1</span>],
        <span class="dt">dataname            =</span> <span class="st">&quot;csv_cell_aggregated&quot;</span>,
        <span class="dt">starttick           =</span> <span class="dv">2000</span>, 
        <span class="dt">tickinterval        =</span> <span class="dv">5</span>, 
        <span class="dt">endtick             =</span> <span class="dv">2020</span>,
        <span class="dt">datanametakeovers   =</span> <span class="st">&quot;csv_dataTakeOversAll&quot;</span>,
        <span class="dt">aftaggregation      =</span> aftaggregation)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_takeovers_all</span>(simp, <span class="dt">landusedataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>,
    <span class="dt">starttick =</span> <span class="dv">2000</span>, <span class="dt">tickinterval=</span><span class="dv">5</span>, <span class="dt">endtick =</span> <span class="dv">2020</span>)</code></pre>
</div>
<div id="givinginstatistics-frequencies-per-aft---regions-aggregated" class="section level4">
<h4>GivingInStatistics (Frequencies per AFT - Regions aggregated)</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(craftyr)
<span class="kw">library</span>(reshape2)
simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_aggregateGiStatistics&quot;</span>)

regions =<span class="st"> </span>simp$sim$regions
csv_aggregateGiStatistics &lt;-<span class="st"> </span>csv_aggregateGiStatistics[csv_aggregateGiStatistics[,<span class="st">&quot;Region&quot;</span>] %in%<span class="st"> </span>regions,]

dat &lt;-<span class="st"> </span><span class="kw">aggregate</span>(<span class="kw">subset</span>(csv_aggregateGiStatistics, <span class="dt">select=</span>simp$mdata$aftNames[-<span class="dv">1</span>]), <span class="dt">by =</span> <span class="kw">list</span>(
                <span class="dt">Trials=</span>csv_aggregateGiStatistics[, <span class="st">&quot;Trials&quot;</span>],
                <span class="dt">Runid=</span>csv_aggregateGiStatistics[, <span class="st">&quot;Runid&quot;</span>]),
        <span class="dt">FUN=</span>sum)

melteddat &lt;-<span class="st"> </span>reshape2::<span class="kw">melt</span>(dat, <span class="dt">variable.name=</span><span class="st">&quot;AFT&quot;</span>, <span class="dt">id.vars=</span> <span class="kw">c</span>(<span class="st">&quot;Trials&quot;</span>, <span class="st">&quot;Runid&quot;</span>), 
        <span class="dt">direction=</span><span class="st">&quot;long&quot;</span>, <span class="dt">value.name =</span> <span class="st">&quot;Number&quot;</span>)

<span class="kw">visualise_bars</span>(simp, <span class="dt">data =</span> melteddat, <span class="dt">y_column =</span> <span class="st">&quot;Number&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Giving In Statistics&quot;</span>,
        <span class="dt">facet_column =</span> <span class="st">&quot;AFT&quot;</span>, <span class="dt">facet_ncol =</span> <span class="dv">1</span>, <span class="dt">fill_column =</span> <span class="st">&quot;AFT&quot;</span>,
        <span class="dt">alpha=</span><span class="fl">1.0</span>, <span class="dt">x_column =</span> <span class="st">&quot;Trials&quot;</span>, <span class="dt">ggplotaddons =</span> ggplot2::<span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>))</code></pre>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAEgCAMAAABcujGyAAABIFBMVEUAAAAAAEgAAHQASJwAdL8ZGUYZGWkZRokZaaUaGhozMzNGGRlGGUZGGWlGRolGicBIAABIAEhIAHRInL9InN9NTU1NTXJNTZJNcrBNksxpGRlpGUZpRolpaWlppdlyTU1yTXJyTZJycrBysMxysOV0AAB0AEh0dHR0v790v/+JRhmJRkaJRmmJpYmJwKWJwNmSTU2STXKSTZKScrCSzP+cSACcnEic37+c3/+laRml2dmwck2wcnKwcpKwkk2wzLCw5f+/dAC/35y//7+////AiUbA2dnMkk3M///ZpWnZwInZ2aXZ2cDZ2dnfnEjfv3Tf/7/f/9/f///lsHLl///r6+v/v3T/zJL/35z/39//5bD//7///8z//9///+X///8qKkn1AAAACXBIWXMAAA7DAAAOwwHHb6hkAAANPElEQVR4nO2dC1vbyBlGDWGT0DSBpjhpmwvNxW1J0oQ2piWQbtdtuAa73bA1rm3Q//8X1cxItoUlmBGW5lN9zpMF2ZJfa8XxXCW5FgAIpuZ7BwCuAkFBNAgKokFQEA2CgmgQFESDoCAaBAXRIGg23VrI4pdw6Xzr1rfR04kHl0lf2VJJa2qp9/DL5Ar1MPmS6WfmGwTNYtCoGdZuKmicpNZ0FhOCqofJl0w/M98gaAbnW1qooLe6sO30smm3OqbwbKlfKYJe2njqmfkGQTPo1pbMQm91SWvX0uYMGkvqQfjfv+JaW7UEfrkVbX15pcK80rzUPN81JbN5qJ3WixuTz6iN9GcjWjWnIGgGrcmSTBnT1ZKEP42DptbeUOWjJiHoaKWmM3I1EjR6ycZYx+glE8+YjUJD41Ul/r9LAkHTCYu7iUfKGPNM6G0k1JIybync0EiUFDRaGWeN+khRE1PJr0rmUYuzt7oWvWf8zPlWmNsNXzVeNZcgaDqRER3TuTFFWqjOoLEW6aMcUxt1tXnaNkVyZUxrqpOkpE0IGuucUDbQ0bV5lVOBoOmkCNpb3Qi6uriMngiXloJO1E5MtkG/TTxlCD2LjdTLtYSgRuHYYCNoXKmPVs0lCJqOKQXNUqScMq6lf+cRNIo0xbBqUiYq9EjaaIOkoKNVcwmCZtCtTSnXWfxnY+2yg6lVfELQ0bpW5J9xL9EGjTYIvZ2q4ser5hIEzSDs6UTjSnEVHyr1e1VcJh1M7SQlBI1XdlU9rQpcrabO1Q/NEIHSUT3qjBoR4cKgMblqLkHQLEYzSZExo7H7Sw6mDTMlq/ioyalHNTt6FGk0s9RJDjNNPGPGSuOh0flthCJoNlqsqImp/TADmpcdVCb9oXFlG3Tcz9EFp3J/YbtlmqO3fhwN1C9FG/wYD9Tren20ai5B0Jmghp+gCBD0hpgu0Nz2YQoHQW/InDcRCwdBb8p8NxELB0FBNAgKokFQEA2CgmjsBW0DlAeCgmgQFESDoCAaBAXRICiIBkFBNAgKokFQEA2CFszXJx/aJ2+WFXf22+3j+zu+96haIGjBHD1bUb8iMY+WbyOoEwhaLCdv3z8NC85I0E/f/ZES1A0ELZbjB/ufnrfHVTtVvCMIWix7K+2ju20EzQ2CForuHqlmJ4LmBEELJazhw5bncwTNDYIWyp5qf6o6HkFzgqBFcvJO6aiGQhE0JwgKokFQEA2CgmgQFESDoCAaBAXRuAv6n4jRQjEQT7zeGEGJlxyPoMSLjkdQ4kXHuwsK4AFKUOJFxtsJ2l+vPz5EUOLLj7cSdLjZDE5/9ROCEl96vJWg/Zc/BcM//YCgxJce7yboz0Ku2hCgIK6v4h9RghJffryVoKqT9OozghJffrydoKoU/fMhghJferxdFR+2P09/HSAo8aXH25WgZ/V6PMoE4ANmkogXGW8n6MVuPe7EIyjxZcbbCXrQDM6YSSLeQ7yVoKMePIISX3K8laD9l9+bKp6ZJPDE1YKuN/V0pybX58Ad4onXG1sJyskixHuKtxJ0+BFBifcTbyWo6sVTxRPvI95O0OHm+Ix6AA8wk0S8yHgEJV50vJ2gZ3UumiPeS7yVoP0Xh5xuR7yXeOsqXkmKoMSXHW8tqC5BmeoET1wjaH+d0+2I9xFvKWjATBLxXuKtBVWzSQhKfNnxVoKqk5UpQYn3EW9Xgp7Wx5d8AHiAmSTiRcbbCTrcHF92nOtt3CGeeL2xjaAXu01mkoj3Em8lqLpojpkk4n3EWwnK7RfBNwwzES8y3krQxEVzAB6wb4MCeOCaXvzrcS8ewAP246AAHuCb5kA0CAqiQVAQjb2gbYDyQFAQDYKCaBAURIOgIBoEBdEgKIgGQUE0CAqiQdCC+frkQ/vkzbLizv7xveXl5773qFogaMEcPVtRv47v7xhZj3/+wfcuVQoELZaTt++f7rcjQY/uhkufKEJdQNBiOX6wr43UgipUKQr2IGix7K2YcjMW9OTNit8dqhoIWii6e3R7ZyTo19/gpxsIWihhDW9anUbQ43s0QB1B0ELZU0KqOl4Lip/uIGiRnLxT5aYeXVKC7unhUCR1AUFBNAgKoskQ9HxrA0FBABmCDhoIChLIquI7t74hKPgnswStaRa/ICj4JKsEzcb3HsNc4S5ortuQukM88XrjLEE7tdpGakM019u4QzzxeuMMQVu3/t3YON9aQlDivcZnCDpobKiRpm5KJwnAA/aC5vocuEM88XrjdEGDjqriB40186i/Xn98iKDElx+fJWjQVcOgkZ/DzWZwGt8DPNfbuEM88XrjLEEnSXwNTa63cYd44vXGToLyTXPgifQqPjpjRFfxjyhBiS8/PkvQjuq/T3aSXn1GUOLLj88QNDrdbmKYSX3bHIISX3a8laCq/cn3xRPvIz6riu+aKj5qhJ7Vx980l+tt3CGeeL1xiqDxyaDp54MCeIDT7YgXGW8n6MVuPR5lQlDiy4zPErS3OlnFHzSDM6Y6ifcQnyFo8kzQ0RATghJfcnyGoMnLjvsvvzdVPFOd4Ikrb9zQX2/q+XhNrs+BO8QTrzdOFzR5qjJnMxHvKz5L0EQnafgRQYn3E59Zxa9NPjygiifeT3yGoJfuzTTcHF/yAeAB+7vb5focuEM88XrjdEGD3sPJWfizOhfNEe8lPkPQ5M3D+i8OOd2OeC/xWSXoFEpSBCW+7HhrQXUJykwSeOKa+4P21zmbiXgf8RmCRpr+bnu0zEA98T7irxQ06E7cf/GgiaDElx5/jaCmilfnglKCEu8j/mpBW1EJelofn1EP4IH0TtLC9vSWuT4H7hBPvN44XdBLDDe57Jh4L/FWgl7sNplJIt5LfJqgU9fFq2uSmEki3kf8lSVoK7qDLbdfBN+kCDpoxH0khpmI9xWfLWi3NhqlT1yTBOCBKUFbtfGV8Yk2KIAHps6or02cUn+x+3rciwfwQFLQ3mrytnaT46AAHkgI2qmlfAUigEe4PyiIxv7+oAAeQFAQjb2gbYDyQFAQDYKCaBAURIOgIBoEBdEgKIgGQUE0CAqiQdCC+frkQ/vkzbLizv7R8vLtHd97VC0QtGCOnq2oX8f3d8yPvbu+96haIGixnLx9/3S/HQnanlwAKxC0WI4f7H963p7wkhLUDQQtlr2V9pFSMhL0+N53HzzvUcVA0ELR3aPbOxMlqOo0gT0IWihhDd9uqzp+3PTUNT7YgqCFsqdsVHW8FvTozj4lqCMIWiQn71S5qZw0Jeje8jJtUDcQFESDoCAaBAXRICiIBkFBNAgKonEXNNdtSN0hnni9MYISLzkeQYkXHY+gxIuOdxcUwAOUoMSLjLcTtL9efxx/h0Kut3GHeOL1xjaCDjebwWl8k/pcb+MO8cTrjW0ETXxPUq63cYd44vXGToLyVYjgieur+EeUoMSXH28lqOokvfqMoMSXH28naGC+DhFBiS873q6KD9ufo69CzPU27hBPvN7YqgQ9q/NViOAVZpKIFxlvJ+jFbj3uxCMo8WXG2wl60AzOmEki3kO8laCjHjyCEl9yvJWg/ZffmyqemSTwxNWCrjf1dKcm1+fAHeKJ1xtbCcrJIsR7ircSdPgRQYn3E28lqOrFU8UT7yPeTtDh5viMegAPMJNEvMh4BCVedLydoGd1Lpoj3ku8laD9F4ecbke8l3jrKl5JiqDElx1vLaguQZnqBE9cI2h/ndPtiPcRbylowEwS8V7irQVVs0kISnzZ8VaCqpOVKUGJ9xFvV4Ke1seXfAB4gJkk4kXG2wk63Bxfdpzrbdwhnni9sY2gF7tNZpKI9xJvJai6aI6ZJOJ9xFsJyu0XwTcMMxEvMt5K0MRFczHVLkrZe3/k2nv7NuiN3kYM7L0/Zi/oxe7rcS/+Rm8jBvbeH7MXNDEOeqO3EQN7748CBAXwDIKCaBAURIOgIBpHQdN6TdXhtF6v7p1S9HhfZY+/3vs8x99N0MTZI9UjvjigipypP21lj7/e+1zH303Q1JH7ynDxubonXx88+nt43Kt6/M3e5zr+boKmzn1WhrB+rNcrW4gqMat7/NXe5zr+boImzh6pHP3f/lDhUlT9iat7/PXHK8/xn6cSVFPZdmj1S1CN6/GfpzaoptKCVvf4lyRo6tkjlUFVkBd/q+KfV6H+xNU9/nEDxfn4z9s4aHWvov7/GAd1Pv7MJIFoEBREg6AgGgQF0SAoiAZBQTQICqJB0JlyvlUzLOmHvV9sx2smFsEBBJ056SoiaD4QdOYg6CxB0JljVOw9/Ett8R/hYm81rPHX9LN6ccP3/lULBJ05kaCrS3px0AiN7Cx+CRf1it4qhrqAoDMnFnRDL/73m3lK/Xv4xfe+VQ8EnTmRoLq4VD+6Yb2+oIvPVty7B2sQdOYkBR00FraDuH4PBo3aIsWoCwg6c5KCdm+FdXx3YTvuxes2KViDoDPnkqCqAF3VgnZV4clwkxsIOnMutUHDhufCXxsbatG0Rn3vX7VAUBANgoJoEBREg6AgGgQF0SAoiAZBQTQICqJBUBANgoJo/gelzKXA5HretQAAAABJRU5ErkJggg==" /><!-- --></p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_gistatistics_singleRegion</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_aggregateGiStatistics&quot;</span>, 
        <span class="dt">regions =</span> simp$sim$regions, <span class="dt">facet_ncol =</span> <span class="dv">1</span>)</code></pre>
</div>
<div id="pre-allocation-competitiveness" class="section level4">
<h4>Pre-Allocation Competitiveness</h4>
<p>% TODO High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_competitiveness_prealloc</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_preAlloc_rbinded&quot;</span>, 
        <span class="dt">facet_ncol =</span> <span class="kw">length</span>(simp$mdata$aftNames), <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;PreAllocationCompetition&quot;</span>, 
        simp$sim$id, <span class="dt">sep=</span><span class="st">&quot;_b_&quot;</span>),
        <span class="dt">maxcompetitiveness =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">numbins =</span> <span class="dv">15</span>, <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">ggplotaddons =</span> <span class="ot">NULL</span>, <span class="dt">checkexists =</span> <span class="ot">FALSE</span>)</code></pre>
<p>High level when separating AFTs:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_competitiveness_preallocPerAft</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_preAlloc_rbinded&quot;</span>, 
        <span class="dt">facet_ncol =</span> <span class="kw">length</span>(simp$mdata$aftNames), <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;PreAllocationCompetition&quot;</span>, 
        simp$sim$id, <span class="dt">sep=</span><span class="st">&quot;_b_&quot;</span>),
        <span class="dt">maxcompetitiveness =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">numbins =</span> <span class="dv">15</span>, <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">ggplotaddons =</span> <span class="ot">NULL</span>, <span class="dt">checkexists =</span> <span class="ot">FALSE</span>)</code></pre>
</div>
<div id="cell-volatility-1" class="section level4">
<h4>Cell Volatility</h4>
<p>TODO</p>
<pre class="sourceCode r"><code class="sourceCode r">cellnumber &lt;-<span class="st"> </span><span class="kw">input_csv_param_capitals_cellnumbers</span>(simp, <span class="dt">capitals =</span> simp$mdata$capitals, 
        <span class="dt">regionpartfromend =</span> <span class="dv">2</span>, <span class="dt">regionpartdevider =</span> <span class="st">&quot;_&quot;</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r">numcells &lt;-<span class="st"> </span>cellnumbers &lt;-<span class="st"> </span><span class="kw">input_csv_param_capitals_cellnumbers</span>(simp, <span class="dt">regionpartfromend =</span> <span class="dv">2</span>, <span class="dt">regionpartdevider =</span> <span class="st">&quot;_&quot;</span>)
<span class="kw">hl_volatility</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_aggregated_cellvolatility&quot;</span>, 
        <span class="dt">datatype =</span> <span class="st">&quot;AggregateCellVolatility&quot;</span>, <span class="dt">datacolumns =</span> <span class="kw">c</span>(<span class="st">&quot;CellVolatility&quot;</span>, <span class="st">&quot;NumVolatileCells&quot;</span>),
        <span class="dt">percent =</span> numcells)</code></pre>
</div>
<div id="marginal-utilities" class="section level4">
<h4>Marginal Utilities</h4>
<p>TODO</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">input_tools_load</span>(simp, <span class="st">&quot;csv_MarginalUtilitites_melt&quot;</span>)
<span class="kw">visualise_lines</span>(<span class="dt">simp =</span> simp, <span class="dt">data =</span> data, <span class="dt">y_column =</span> <span class="st">&quot;value&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Marginal Utilities&quot;</span>,
        <span class="dt">colour_column =</span> <span class="st">&quot;Service&quot;</span>,
        <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;MarginalUtilities&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>),
        <span class="dt">alpha=</span><span class="fl">0.7</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_marginalutilities</span>(simp)</code></pre>
</div>
<div id="demand-normalised-per-cell-marginal-utilities" class="section level4">
<h4>Demand-normalised per-cell marginal Utilities</h4>
<p>The file MarginalUtilitiesPerCell.csv can be craeted by python script extractMarginalUtilityFromFiles.py.</p>
<p>TODO</p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_normalisedutilities</span>(simp,
        <span class="dt">filenamemarginalutils =</span> <span class="kw">paste</span>(simp$dirs$output$rdata, <span class="st">&quot;MarginalUtilitiesPerCell.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>),
        <span class="dt">filenameNormalisedResiduals =</span> <span class="kw">paste</span>(<span class="st">&quot;NormalisedResiduals&quot;</span>, 
                shbasic::<span class="kw">shbasic_condenseRunids</span>(<span class="kw">data.frame</span>(data)[, <span class="st">&quot;ID&quot;</span>]), <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>),
        <span class="dt">capitalfilepartorder =</span> <span class="kw">c</span>(<span class="st">&quot;regionalisation&quot;</span>, <span class="st">&quot;U&quot;</span>, <span class="st">&quot;regions&quot;</span>, <span class="st">&quot;U&quot;</span>, <span class="st">&quot;datatype&quot;</span>))</code></pre>
</div>
<div id="total-productivity" class="section level4">
<h4>Total Productivity</h4>
</div>
<div id="actions" class="section level4">
<h4>Actions</h4>
<p>To evaluate the effect of actions it is valuable to show selected actions along with a measure they may affect:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">convert_aggregate_demand</span>(simp)
<span class="kw">convert_aggregate_supply</span>(simp, <span class="dt">celldataname =</span> <span class="st">&quot;dataAgg&quot;</span>)

 <span class="co"># store percental supply (regarding demand)</span>

<span class="kw">input_tools_load</span>(simp, <span class="dt">objectName=</span><span class="st">&quot;csv_aggregated_demand&quot;</span>)
<span class="kw">input_tools_load</span>(simp, <span class="dt">objectName=</span><span class="st">&quot;csv_aggregated_supply&quot;</span>)
<span class="kw">colnames</span>(csv_aggregated_demand)[<span class="kw">colnames</span>(csv_aggregated_demand) ==<span class="st"> &quot;variable&quot;</span>] &lt;-<span class="st"> &quot;Service&quot;</span>
dataAggregatedPercentalSupply &lt;-<span class="st"> </span><span class="kw">merge</span>(csv_aggregated_supply, csv_aggregated_demand)
dataAggregatedPercentalSupply$PercentalSupply &lt;-<span class="st"> </span><span class="dv">100</span> *<span class="st"> </span>dataAggregatedPercentalSupply$TotalProduction /<span class="st"> </span>
<span class="st">        </span>dataAggregatedPercentalSupply$Demand
<span class="kw">input_tools_save</span>(simp, <span class="st">&quot;dataAggregatedPercentalSupply&quot;</span>)

<span class="kw">visualise_actions</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;dataActions&quot;</span>,
    <span class="dt">monitordataname =</span> <span class="st">&quot;dataAggregatedPercentalSupply&quot;</span>,
    <span class="dt">monitorvars =</span> simp$mdata$services,
    <span class="dt">monitorColours =</span> simp$colours$Service,
    <span class="dt">colour_column =</span> <span class="st">&quot;Service&quot;</span>,
    <span class="dt">size_column =</span> <span class="ot">NULL</span>,
    <span class="dt">measure_name =</span> <span class="st">&quot;PercentalSupply&quot;</span>,
    <span class="dt">actionColours =</span> <span class="kw">c</span>(<span class="st">&quot;DoNothing&quot;</span> =<span class="st"> &quot;grey&quot;</span>, <span class="st">&quot;RegionalSubsidyPa_CCereal&quot;</span> =<span class="st"> </span>simp$colours$Service[<span class="st">&quot;Cereal&quot;</span>],
            <span class="st">&quot;RegionalSubsidyPa_Forester&quot;</span> =<span class="st"> </span>simp$colours$Service[<span class="st">&quot;Timber&quot;</span>]))</code></pre>
</div>
</div>
<div id="from-single-files" class="section level3">
<h3>From Single Files</h3>
<div id="aft-composition" class="section level4">
<h4>AFT Composition</h4>
<p>Reads single CSV file with AFT composition and produces timeline figure.</p>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_aftcomposisition_file</span>(simp, csvfilename, <span class="dt">title =</span> <span class="st">&quot;AftComposition&quot;</span>, 
        <span class="dt">figurefilename =</span> <span class="st">&quot;AftComposition&quot;</span>) 

### Comparisons
To compare different data sets, according sip lists need to be defined:</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&quot;./simp44.R&quot;</span>)
simp1 &lt;-<span class="st"> </span>simp
simp1$sim$shortid &lt;-<span class="st"> &quot;SD.9&quot;</span>

<span class="kw">source</span>(<span class="st">&quot;./simp45.R&quot;</span>)
simp2 &lt;-<span class="st"> </span>simp
simp2$sim$shortid &lt;-<span class="st"> &quot;SD.4&quot;</span>

<span class="kw">source</span>(<span class="st">&quot;./simp46.R&quot;</span>)
simp3 &lt;-<span class="st"> </span>simp
simp3$sim$shortid &lt;-<span class="st"> &quot;SD.55&quot;</span>
simps &lt;-<span class="st"> </span><span class="kw">list</span>(simp1, simp2, simp3)</code></pre>
</div>
<div id="aft-composition-1" class="section level4">
<h4>AFT Composition</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_comp_aggregate_aftcompositions</span>(simp, simps, <span class="dt">dataname=</span><span class="st">&quot;dataAggregateAFTComposition&quot;</span>)</code></pre>
</div>
<div id="demand-and-supply" class="section level4">
<h4>Demand and Supply</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_comp_demandsupply</span>(simp, simps, <span class="dt">dataname=</span><span class="st">&quot;dataAggregateSupplyDemand&quot;</span>)</code></pre>
</div>
</div>
</div>
</div>
<div id="output-write-csv-data" class="section level1">
<h1>Output (write) CSV Data</h1>
<div id="land-use-index-per-tick" class="section level2">
<h2>Land Use Index (per tick)</h2>
<pre class="sourceCode r"><code class="sourceCode r">simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
simp$sim$runids         &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>)
simp$sim$scenario       &lt;-<span class="st">  &quot;A1&quot;</span>
craftyr::<span class="kw">hl_write_csv_landuseindex</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>, <span class="dt">pertick =</span> <span class="ot">TRUE</span>,
        <span class="dt">identifier =</span> <span class="kw">paste</span>(simp$sim$scenario, <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>),
        <span class="dt">useIndices =</span> <span class="ot">TRUE</span>, <span class="dt">writeLegend =</span> <span class="ot">TRUE</span>, <span class="dt">zip =</span> <span class="ot">TRUE</span>, <span class="dt">removeCSV =</span> <span class="ot">TRUE</span>,
        <span class="dt">outdir =</span> <span class="st">&quot;M:/web/public_html/CRAFTY/Europe&quot;</span>, <span class="dt">tempdir =</span> <span class="st">&quot;C:/Users/sholzhau/Desktop/Temp&quot;</span>)</code></pre>
</div>
<div id="generate-landuseindex-key" class="section level2">
<h2>Generate LandUseIndex key</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_landindiceskey_csv</span>(simp)</code></pre>
</div>
<div id="aggregate-demand-and-supply" class="section level2">
<h2>Aggregate demand and supply</h2>
<p>Aggregates demand and supply for all regions per tick and stores data as CSV file.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_aggregate_demandsupply_csv</span>(simp)</code></pre>
</div>
<div id="supplydemand-gap-regarding-agent-parameters-gu-probability" class="section level2">
<h2>Supply/Demand gap regarding agent parameters (GU probability)</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_comp_demandsupplygap_agentparams</span>(simp, <span class="dt">simps =</span> <span class="kw">input_tools_buildsimplist</span>(<span class="dv">111</span>:<span class="dv">116</span>),
        <span class="dt">dataname =</span> <span class="st">&quot;dataAggregateSupplyDemand&quot;</span>, 
        <span class="dt">filename =</span> <span class="kw">paste</span>(<span class="st">&quot;SupplyDemandGap_&quot;</span>, 
                if(!<span class="kw">is.null</span>(simp$sim$rundesc))<span class="kw">paste</span>(simp$sim$rundesc, <span class="dt">collapse =</span> <span class="st">&quot;-&quot;</span>) else simp$sim$id, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>),
        <span class="dt">title =</span> <span class="st">&quot;Demand/Supply Gap&quot;</span>,
        <span class="dt">agentparam =</span> <span class="st">&quot;givingUpProb&quot;</span>, <span class="dt">aft =</span> simp$mdata$aftNames[<span class="dv">2</span>], 
        <span class="dt">ggplotparams =</span> ggplot2::<span class="kw">xlab</span>(<span class="st">&quot;Probability of Giving up&quot;</span>))</code></pre>
</div>
</div>
<div id="conversions" class="section level1">
<h1>Conversions</h1>
<ul>
<li>convert_csv2shapefile</li>
</ul>
<div id="stored-csvdata.frame-rdata-to-raster-file-ascii" class="section level2">
<h2>Stored CSV/data.frame (rData) to raster file (ASCII)</h2>
<pre class="sourceCode r"><code class="sourceCode r">simp &lt;-<span class="st"> </span><span class="kw">param_getExamplesSimp</span>()
<span class="kw">input_tools_load</span>(simp, <span class="dt">dataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>)

data &lt;-<span class="st"> </span><span class="kw">get</span>(dataname)
data &lt;-<span class="st"> </span>data[data$Tick ==<span class="st"> </span><span class="dv">2010</span>, <span class="kw">c</span>(simp$csv$cname_x, simp$csv$cname_y, <span class="st">&quot;LandUseIndex&quot;</span>)]
<span class="kw">rownames</span>(data) &lt;-<span class="st"> </span><span class="ot">NULL</span>

raster &lt;-<span class="st"> </span>craftyr::<span class="kw">convert_2raster</span>(simp, data, <span class="dt">targetCRS =</span> <span class="st">&quot;+init=EPSG:32632&quot;</span>, <span class="dt">layers=</span><span class="kw">c</span>(<span class="dv">1</span>))

filename &lt;-<span class="st"> </span><span class="kw">sprintf</span>(<span class="st">&quot;%s/%s_LandUseIndex_%d.%s&quot;</span>,
        simp$dirs$output$raster,
        <span class="kw">output_tools_getDefaultFilename</span>(simp),
        <span class="kw">as.integer</span>(tick),
        <span class="st">&quot;asc&quot;</span>)
shbasic::<span class="kw">sh.ensurePath</span>(filename, <span class="dt">stripFilename =</span> <span class="ot">TRUE</span>)
raster::<span class="kw">writeRaster</span>(raster[[<span class="dv">1</span>]][[<span class="dv">1</span>]], <span class="dt">filename =</span> filename, <span class="dt">format =</span> <span class="st">&quot;ascii&quot;</span>, 
        <span class="dt">NAflag=</span>naflag, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)</code></pre>
<p>High level:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hl_cell2raster</span>(simp, tick, <span class="dt">dataname =</span> <span class="st">&quot;csv_LandUseIndex_rbinded&quot;</span>, 
        <span class="dt">landuseindexcolname =</span> <span class="st">&quot;LandUseIndex&quot;</span>, <span class="dt">naflag =</span> -<span class="dv">9</span>)</code></pre>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
